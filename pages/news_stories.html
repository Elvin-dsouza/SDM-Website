<svg style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>

  <symbol id="icon-assignment" viewBox="0 0 24 24">
  <title>assignment</title>
  <path class="path1" d="M17.016 9v-2.016h-10.031v2.016h10.031zM17.016 12.984v-1.969h-10.031v1.969h10.031zM14.016 17.016v-2.016h-7.031v2.016h7.031zM12 3c-0.563 0-0.984 0.422-0.984 0.984s0.422 1.031 0.984 1.031 0.984-0.469 0.984-1.031-0.422-0.984-0.984-0.984zM18.984 3c1.078 0 2.016 0.938 2.016 2.016v13.969c0 1.078-0.938 2.016-2.016 2.016h-13.969c-1.078 0-2.016-0.938-2.016-2.016v-13.969c0-1.078 0.938-2.016 2.016-2.016h4.172c0.422-1.172 1.5-2.016 2.813-2.016s2.391 0.844 2.813 2.016h4.172z"></path>
  </symbol>

  <symbol id="icon-assignment_turned_in" viewBox="0 0 24 24">
  <title>assignment_turned_in</title>
  <path class="path1" d="M9.984 17.016l8.016-8.016-1.406-1.406-6.609 6.563-2.578-2.578-1.406 1.406zM12 3c-0.563 0-0.984 0.422-0.984 0.984s0.422 1.031 0.984 1.031 0.984-0.469 0.984-1.031-0.422-0.984-0.984-0.984zM18.984 3c1.078 0 2.016 0.938 2.016 2.016v13.969c0 1.078-0.938 2.016-2.016 2.016h-13.969c-1.078 0-2.016-0.938-2.016-2.016v-13.969c0-1.078 0.938-2.016 2.016-2.016h4.172c0.422-1.172 1.5-2.016 2.813-2.016s2.391 0.844 2.813 2.016h4.172z"></path>
  </symbol>
    <symbol id="icon-group_add" viewBox="0 0 24 24">
  <title>group_add</title>
  <path class="path1" d="M12.984 12.984c2.016 0 6 0.984 6 3v2.016h-12v-2.016c0-2.016 3.984-3 6-3zM19.641 13.172c2.016 0.328 4.359 1.266 4.359 2.813v2.016h-3v-2.016c0-1.172-0.516-2.063-1.359-2.813zM12.984 11.016c-1.641 0-3-1.359-3-3s1.359-3 3-3 3 1.359 3 3-1.359 3-3 3zM18 11.016c-0.328 0-0.609-0.047-0.891-0.141 0.563-0.797 0.891-1.781 0.891-2.859s-0.328-2.063-0.891-2.859c0.281-0.094 0.563-0.141 0.891-0.141 1.641 0 3 1.359 3 3s-1.359 3-3 3zM8.016 9.984v2.016h-3v3h-2.016v-3h-3v-2.016h3v-3h2.016v3h3z"></path>
  </symbol>
  <symbol id="icon-close" viewBox="0 0 24 24">
  <title>close</title>
  <path class="path1" d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
  </symbol>
  <symbol id="icon-people" viewBox="0 0 24 24">
  <title>people</title>
  <path class="path1" d="M15.984 12.984c2.344 0 7.031 1.172 7.031 3.516v2.484h-6v-2.484c0-1.5-0.797-2.625-1.969-3.469 0.328-0.047 0.656-0.047 0.938-0.047zM8.016 12.984c2.344 0 6.984 1.172 6.984 3.516v2.484h-14.016v-2.484c0-2.344 4.688-3.516 7.031-3.516zM8.016 11.016c-1.641 0-3-1.359-3-3s1.359-3 3-3 2.953 1.359 2.953 3-1.313 3-2.953 3zM15.984 11.016c-1.641 0-3-1.359-3-3s1.359-3 3-3 3 1.359 3 3-1.359 3-3 3z"></path>
  </symbol>
  <symbol id="icon-home" viewBox="0 0 24 24">
  <title>home</title>
  <path class="path1" d="M9.984 20.016h-4.969v-8.016h-3l9.984-9 9.984 9h-3v8.016h-4.969v-6h-4.031v6z"></path>
  </symbol>
  <symbol id="icon-keyboard_backspace" viewBox="0 0 24 24">
  <title>keyboard_backspace</title>
  <path class="path1" d="M21 11.016v1.969h-14.156l3.563 3.609-1.406 1.406-6-6 6-6 1.406 1.406-3.563 3.609h14.156z"></path>
  </symbol>
  <symbol id="icon-local_library" viewBox="0 0 24 24">
  <title>local_library</title>
  <path class="path1" d="M12 8.016c-1.641 0-3-1.359-3-3s1.359-3 3-3 3 1.359 3 3-1.359 3-3 3zM12 11.531c2.344-2.203 5.531-3.516 9-3.516v10.969c-3.469 0-6.656 1.359-9 3.563-2.344-2.203-5.531-3.563-9-3.563v-10.969c3.469 0 6.656 1.313 9 3.516z"></path>
  </symbol>
  </defs>
</svg>
<div class="card-container">
<h1 id="heading" style="color:white;">News</h1>
<nav class="secnav" id="facnav">
  <div class="material-button active" >News</div>
  <div class="material-button">Publications</div>
</nav>
<div class="view-pager-container">
    <div class="view-pager">
      <div class="page">
        <div class="facility-card">
              <div class="container-full row large-news-bar">
                  <img src="images/dance.jpg" alt="" class="large-news-img" />
                  <h1 class="large-news-header">Lorem ipsum dolor sit amet</h1>
              </div>
              <div class="container-full col wrap" id="nsl">


              </div>
        </div>
      </div>
      <div class="page">
        <div class="facility-card">
          <article>
              <h1>College Quarterly Magazine</h1>
          </article>

        </div>
      </div>

    </div>
  </div>
</div>

<script>
var aposts;
$(document).ready(function(){


    getBlogPosts();
    //loadPosts();

});
$("main .material-button").click(function(e){
			 var parentOffset = $(this).offset();//get the offset of the parent of the material layer from the window
			 var $layer = $('<div/>');//define a new div
			 $layer.addClass("material-layer");// add the material-layer class to the div
			 var relX = e.pageX - parentOffset.left;//page click x - offset of the button(x)
			 var relY = e.pageY - parentOffset.top;//page click y - offset of the button(y)
			 $layer.css({
				 "left":relX,
				 "top":relY,
			 });//assign the respective offset x y coords for the element
			 $layer.appendTo($(this));//append the created div to the button
			 $layer.show();//show the element
			 $layer.addClass("animate");//animate the element
			 setTimeout(function(){
			 $layer.remove();//remove after 2 seconds
			 },2000);
});

$("#facnav > div").click(function(e){
	var idx = $(this).index();
	console.log("index:" + idx);
	var wdt = $(".view-pager-container").width();
	console.log("width:" + wdt);
	var move = (idx*wdt);
	console.log("move:" + move);
	$(".view-pager").animate({marginLeft:"-"+move+"px"},500);

});

$(".secnav > div").click(function(e){
			$(".secnav > div").removeClass("active");
			$(this).addClass("active");
});

window.onbeforeunload = function () {

    var date = new Date();
    date.setTime(date.getTime()+(5*1000));
    if(window.location.pathname == "/sdm/news_stories.html")
		document.cookie = "page=news_stories; expires="+date.toGMTString();

};


function getBlogPosts(){
	$.ajax({
		type: 'get',
		dataType: "jsonp",
		url: 'http://sdm.ac.in/blog',
		data: {
			json: "get_recent_posts",
            count:"12"
		},
		success: function(data) {

			$("#nsl").empty();
			if (data){
                aposts=data.posts;
                //<div class="masonitem1"><a href="#modal' + v.id + '" data-toggle="modal"><img src="' + v.thumbnail_images.medium.url + '" alt="' + v.title + '"></a><div id="modal' + v.id + '" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button><h3 id="myModalLabel">' + v.title + '</h3></div><div class="modal-body" style="width: auto; height: auto; max-height: 100%;"><img src="' + v.thumbnail_images.full.url + '" alt="' + v.title + '"></a></div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Close</button></div></div><div style="padding:0 4px"><h4><a href="' + v.url + '">' + v.title + '</a></h4>' + v.content + '<small class="muted">Posted <span data-livestamp="' + v.date + '"></span></small></div></div>
                    $.each(data.posts, function(k, v) {
                            aposts[k].id=k;
                            var headingtext = v.title;
                            if(headingtext.length > 30)
                            {
                                headingtext = headingtext.substring(0,28)+'...';
                            }
                            if(k == 0)
                            {
                                $(".large-news-bar").empty();
                                $(".large-news-bar").append('<img src="'+v.thumbnail_images.full.url+'" alt="" class="large-news-img" /><h1 class="large-news-header">'+v.title+'</h1>')

                            }
                        /*    else if (k % 3 == 0) {
                                $("#nsl").append(' <div class="container-full news-article-links col3"><img src="'+v.thumbnail_images.medium.url+'" alt="news-article" /><h4><a href="'+v.url+'">'+headingtext+'</a></h4></div>')
                            }*/
                            else
                            $("#nsl").append(' <div class="container-full news-article-links col2"><img src="'+v.thumbnail_images.medium.url+'" alt="news-article" /><h4><a href="'+v.url+'">'+headingtext+'</a></h4></div>')
                            //$("#news-selector").append("<div class='news-sel-card'><div class='post-id-selector' style='display:none;'>"+v.id+"</div><img src='"+v.thumbnail_images.medium.url+"' alt='Director'/><div class='heading-fig  center-content' >"+v.title+"</div></div>");
                    });
            }
		}
	});
}


function loadPosts()
{    $("#nsl").empty();
    for (var i = 1; i < aposts.length; i++) {

        $("#nsl").append(' <div class="container-full row news-article-links"><img src="'+v.thumbnail_images.medium.url+'" alt="news-article" /><h4>'+v.title+'</h4></div>')
    }
}
</script>
